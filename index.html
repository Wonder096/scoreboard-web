<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>개인 점수판</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="wrap">
    <header class="top">
      <div class="brand">
        <h1>개인 점수판</h1>
        <p class="sub">누구나 접속 가능 · 데이터는 <b>본인 브라우저</b>에만 저장됨(공유/서버저장 없음)</p>
      </div>

      <div class="top-actions">
        <button id="btnExport" class="ghost">내보내기</button>
        <button id="btnImport" class="ghost">가져오기</button>
        <button id="resetAll" class="danger">리셋</button>
      </div>
    </header>

    <nav class="tabs" role="tablist" aria-label="탭">
      <button class="tab active" data-tab="tab-play">플레이</button>
      <button class="tab" data-tab="tab-settings">설정</button>
      <button class="tab" data-tab="tab-history">기록</button>
      <button class="tab" data-tab="tab-final">최종</button>
    </nav>

    <!-- 플레이 -->
    <section id="tab-play" class="panel active">
      <div class="card">
        <div class="card-head">
          <h2>선수 등록</h2>
          <div class="hint">인원수는 설정 탭에서 변경 가능</div>
        </div>
        <div id="playerInputs" class="grid"></div>
        <div class="row">
          <button id="savePlayers">선수등록 완료</button>
          <button id="clearPlayers" class="ghost">선수만 초기화</button>
        </div>
      </div>

      <div class="card">
        <div class="card-head">
          <h2>점수 입력 (1판)</h2>
          <div class="hint">예: <b>1</b> / <b>2리</b> / <b>3초</b> (골인=숫자만)</div>
        </div>
        <div id="scoreInputs" class="grid"></div>

        <div class="row">
          <button id="addRound">이번 판 점수 추가</button>
          <button id="undoRound" class="ghost">되돌리기(마지막 1판)</button>
          <div class="spacer"></div>
          <span id="playStatus" class="pill"></span>
        </div>
      </div>

      <div class="card">
        <div class="card-head">
          <h2>현재 점수판</h2>
          <div class="hint">점수/진행 상황 요약</div>
        </div>
        <div id="board"></div>
      </div>
    </section>

    <!-- 설정 -->
    <section id="tab-settings" class="panel">
      <div class="card">
        <div class="card-head">
          <h2>기본 설정</h2>
          <div class="hint">진행 중(기록 있음)에는 인원 변경이 제한됨</div>
        </div>

        <div class="form-row">
          <label>인원수(2~8)</label>
          <input id="rosterSize" type="number" min="2" max="8" value="4" />

          <label>총 판수</label>
          <input id="totalGames" type="number" min="1" max="999" value="30" />

          <label>판당 기준점(표시용)</label>
          <input id="basePerGame" type="number" min="0" max="999999" value="1000" />

          <label>판당 최대점(표시용)</label>
          <input id="maxPerGame" type="number" min="0" max="999999" value="1044" />

          <button id="applySettings">적용</button>
        </div>
      </div>

      <div class="card">
        <div class="card-head">
          <h2>추가점수 / 초사 기본점수</h2>
          <div class="hint">골인/리타/초사에 더해지는 값</div>
        </div>

        <div class="form-row">
          <label>초사 기본점수</label>
          <input id="xPoints" type="number" min="-999999" max="999999" value="0" />

          <label>골인 추가점수</label>
          <input id="addGoal" type="number" min="-999999" max="999999" value="0" />

          <label>리타 추가점수</label>
          <input id="addRe" type="number" min="-999999" max="999999" value="0" />

          <label>초사 추가점수</label>
          <input id="addX" type="number" min="-999999" max="999999" value="0" />

          <button id="applyMisc">적용</button>
        </div>
      </div>

      <div class="card">
        <div class="card-head">
          <h2>골인 점수표 (1~8등)</h2>
          <div class="hint">숫자만 입력(예: 1)</div>
        </div>
        <div id="goalTable" class="rank-grid"></div>
        <div class="row">
          <button id="applyGoalTable">적용</button>
          <button id="resetGoalTable" class="ghost">기본값 복구</button>
        </div>
      </div>

      <div class="card">
        <div class="card-head">
          <h2>리타 점수표 (1~8등)</h2>
          <div class="hint">숫자+리/리타 입력(예: 2리)</div>
        </div>
        <div id="retaTable" class="rank-grid"></div>
        <div class="row">
          <button id="applyRetaTable">적용</button>
          <button id="resetRetaTable" class="ghost">기본값 복구</button>
        </div>
      </div>
    </section>

    <!-- 기록 -->
    <section id="tab-history" class="panel">
      <div class="card">
        <div class="card-head">
          <h2>기록(전체)</h2>
          <div class="hint">최대 30판까지 표로 표시 · 되돌리기는 플레이 탭에서</div>
        </div>
        <div id="historyTableWrap"></div>
      </div>
    </section>

    <!-- 최종 -->
    <section id="tab-final" class="panel">
      <div class="card">
        <div class="card-head">
          <h2>최종 점수</h2>
          <div class="hint">요약 + 개인별 통계</div>
        </div>

        <div class="row">
          <button id="renderFinal">최종 화면 갱신</button>
          <button id="resetAfterFinal" class="ghost">최종 후 초기화(선택)</button>
          <div class="spacer"></div>
          <span class="pill">팁: 기록이 바뀌면 “최종 화면 갱신”</span>
        </div>

        <div id="finalView"></div>
      </div>
    </section>
  </div>

  <!-- Import modal -->
  <dialog id="importDialog" class="dialog">
    <form method="dialog" class="dialog-box">
      <h3>가져오기</h3>
      <p class="sub">내보내기 JSON을 붙여넣으면 이 브라우저 데이터가 덮어써짐</p>
      <textarea id="importText" rows="10" placeholder="여기에 JSON 붙여넣기"></textarea>
      <div class="row">
        <button id="confirmImport" value="ok">가져오기 적용</button>
        <button class="ghost" value="cancel">취소</button>
      </div>
    </form>
  </dialog>

  <script src="app.js"></script>
</body>
</html>
